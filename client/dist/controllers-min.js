"use strict";!function(){function e(e,t,s,a,o,n,r,u){var i=this,c=void 0;i.logout=function(){i.dataLoading=!0,e.logout({userData:{username:angular.copy(a.userSession.username)}}).then(function(e){e.data.success?(delete a.userSession,t.show(t.simple().textContent("Bye")),o.disconnect(),s.path("/login")):(t.show(t.simple().textContent(e.data.err)),i.dataLoading=!1)},function(e){t.show(t.simple().textContent("Status error: "+e.status+" - "+e.statusText)),i.dataLoading=!1})},i.sendMsg=function(){if(i.message){var e={from:a.userSession.username,message:i.message};o.emit("msg",e),i.messages.push(e),i.message="",r.$digest()}},o.on("welcome",function(e){t.show(t.simple().textContent(e+" has connected to the auction."))}),o.on("left",function(e){t.show(t.simple().textContent(e+" has disconnected from the auction."))}),o.on("msg",function(e){i.messages.push(e),r.$digest()}),c=a.userSession,t.show(t.simple().textContent("Welcome "+c.userObject.username)),o.emit("login",c.userObject.username),i.messages=[]}angular.module("app.home").controller("HomeController",e),e.$inject=["HomeService","$mdToast","$location","$rootScope","socket","$document","$scope","$anchorScroll"]}(),function(){function e(e,t,s,a,o,n,r){var u=this;u.login=function(){u.dataLoading=!0;var i=angular.copy(u.userData);i.password=n.convertToSHA256(i.password);var c=r.encode(i.username+":"+i.password);t.login(c).then(function(t){"success"===t.data.status?(u.userSession=t.data.data,e.userSession=angular.copy(u.userSession),a.path("/home")):(s.show(s.simple().textContent(t.data.data.message)),10006===t.data.data.errorCode?(u.userData.password="",o[0].getElementById("passwordForm").focus()):(u.userData={},o[0].getElementById("usernameForm").focus()),u.dataLoading=!1)},function(e){s.show(s.simple().textContent("Status error: "+e.status+" - "+e.statusText)),u.userData={},o[0].getElementById("usernameForm").focus(),u.dataLoading=!1})},u.register=function(){a.path("/register")},u.dataLoading=!1}angular.module("app.login").controller("LoginController",e),e.$inject=["$rootScope","LoginService","$mdToast","$location","$document","sha256","$base64"]}(),function(){function e(e,t,s,a,o,n){var r=this;r.register=function(){if(r.dataLoading=!0,r.userData.password===r.userData.confirmPassword){var u=angular.copy(r.userData);delete u.confirmPassword,u.password=n.convertToSHA256(u.password),t.register({userData:u}).then(function(t){"success"===t.data.status?(s.show(s.simple().textContent("Account created successfully")),r.userSession=t.data.data,e.userSession=angular.copy(r.userSession),a.path("/home")):(s.show(s.simple().textContent(t.data.data.message)),r.userData={},o[0].getElementById("usernameForm").focus(),r.dataLoading=!1)},function(e){s.show(s.simple().textContent("Status error: "+e.status+" - "+e.statusText)),r.userData={},o[0].getElementById("usernameForm").focus(),r.dataLoading=!1})}else s.show(s.simple().textContent("The password confirmation doesn't match, please try again.")),r.userData.password="",r.userData.confirmPassword="",o[0].getElementById("passwordForm").focus(),r.dataLoading=!1},r.dataLoading=!1}angular.module("app.register").controller("RegisterController",e),e.$inject=["$rootScope","RegisterService","$mdToast","$location","$document","sha256"]}();